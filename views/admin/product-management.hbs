<!-- Button trigger modal -->
<div class="btn d-flex justify-content-end ">
<a role="button" class="btn btn-outline-primary " data-bs-toggle="modal" data-bs-target="#exampleModal"
    href="/admin/product-management">
    Add Product
</a>
</div>

<!-- Add Product  Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-header">Add Product</h5>
                {{!-- <h5 class="modal-title" id="exampleModalLabel">Edit Category</h5> --}}
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div>
                    <form class="mx-1 mx-md-4" id="myform1" action="/admin/add-product" method="post"
                        enctype="multipart/form-data">


                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" name="productname" id="productname"
                                placeholder=" productname" required />
                            <label for="floatingInput">Product Name</label>
                        </div>






                        {{!-- <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                            <h5 class="col-md-4"> Size</h5>
                            <input type="radio" class="btn-check" value="XL" name="size" id="btnradio1"
                                autocomplete="off" checked>
                            <label class="btn btn-outline-dark" for="btnradio1">XL</label>

                            <input type="radio" class="btn-check" value="L" name="size" id="btnradio2"
                                autocomplete="off">
                            <label class="btn btn-outline-dark" for="btnradio2">L</label>

                            <input type="radio" class="btn-check" value="M" name="size" id="btnradio3"
                                autocomplete="off">
                            <label class="btn btn-outline-dark" for="btnradio3">M</label>


                            <input type="radio" class="btn-check" value="S" name="size" id="btnradio4"
                                autocomplete="off">
                            <label class="btn btn-outline-dark" for="btnradio4">S</label>
                        </div> --}}


                        <div class="form-floating mb-2 mt-2">
                            <input type="number" class="form-control" name="price" id="price" placeholder="Price" required />
                            <label for="floatingInput">Price</label>
                        </div>

                        <div class="form-floating mb-2 mt-2">
                            <input type="number" class="form-control" name="discount" id="discount"
                                placeholder="Discount Price" />
                            <label for="floatingInput">Discount</label>
                        </div>

                        <select class="form-select mb-3 mt-2" aria-label="Default select example" name="category"
                            id="selectCategory">
                            <option value="select" selected> select Category</option>
                            {{#each category}}
                            <option value="{{this._id}}">{{this.categoryname}}</option>
                            {{/each}}
                        </select>


                        {{!-- <select class="form-select mt-2" aria-label="Default select example " id="subCategory"
                            name="SubCategory">
                            <option selected> select SubCategory</option>
                        </select> --}}

                        {{!-- <div class="form-floating mt-2 pt-2">
                            <input type="text" class="form-control" name="Stock" id="Username" placeholder="Stock" />
                            <label for="floatingInput">Created at</label>
                        </div> --}}

                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" name="stock" id="stock" placeholder="discription" />
                            <label for="floatingInput">Stock</label>
                        </div>
                        <div class="form-floating mt-2 pt-2">
                            <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2"name="discription"
                                style="height: 80px"></textarea>
                            <label for="floatingTextarea2" >Discription</label>
                        </div>



                        <label for="formFile" class="form-label">UPLOAD IMAGES</label>
                        <div class="row ml-auto">
                            <input class="form-control col-8" type="file" multiple id="image" name="image" />
                            <img class="col-3" style="width:2rem ;" id="myimg" src="" />
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-outline-success">Submit</button>
                        </div>


                    </form>
                </div>
            </div>


        </div>
    </div>
</div>



<!--Table -->
<div class="content ">
    <div class="row">
        <div class="col-md-10">
            <div class="table-responsive">
                <table class="table table-custom table-lg mb-0" id="product">
                    <thead>
                        <tr>
                            <th>
                                <input class="form-check-input select-all" type="checkbox"
                                    data-select-all-target="#products" id="product">
                            </th>
                            <th>ID</th>
                            <th>Product Name</th>
                            <th>Price</th>
                            <th>Discount</th>
                            <th>Category</th>
                            <th>Image</th>
                            <th>Stock</th>
                            <th class="text-end">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each productDetails}}
                        <tr>
                            <td>
                                <input class="form-check-input" type="checkbox">
                            </td>
                            <td>
                                <a href="#">{{Inc1 @index}}</a>
                            </td>

                            <td>{{this.productname}}</td>
                            <td>{{this.price}}</td>
                            <td>
                                <span class="text-success">{{this.discount}}</span>
                            </td>

                            <td>{{category.categoryname}}</td>
                            <td>
                                <a href="#">
                                    <img src="/productimages/{{this.image.[0]}}" class="rounded" width="40" alt="...">
                                </a>
                            </td>
                            <td>
                                <span class="text-success">{{this.stock}}</span>
                            </td>
                            <td class="text-end">

                                <div class="d-flex">
                                    <div class="dropdown ms-auto">
                                        <a href="#" data-bs-toggle="dropdown" class="btn btn-floating"
                                            aria-haspopup="true" aria-expanded="false">
                                            <i class="bi bi-three-dots"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end">
                                            <a href="#" class="dropdown-item">Action</a>
                                            <a href="/admin/update-product/{{this._id}}" class="dropdown-item"
                                                data-bs-toggle="modal"
                                                data-bs-target="#exampleModalUpdate{{this._id}}">Edit</a>
                                            <a href="/admin/delete-product/{{this._id}}"
                                                class="dropdown-item">Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- Update Product  Modal -->

                         <div class="modal fade" id="exampleModalUpdate{{this._id}}" tabindex="-1"
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-header">Update Product</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>

                                            <form class="mx-1 mx-md-4" id="myform1"
                                                action="/admin/update-product/{{this._id}}" method="post"
                                                enctype="multipart/form-data">

                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" value="{{this.productname}}"
                                                        name="productname" id="productname"
                                                        placeholder=" productname" />
                                                    <label for="floatingInput">Product Name</label>
                                                </div>

                                                <div class="form-floating mb-2 mt-2">
                                                    <input type="number" class="form-control" value="{{this.price}}"
                                                        name="price" id="price" placeholder="Price" />
                                                    <label for="floatingInput">Price</label>
                                                </div>

                                                <div class="form-floating mb-2 mt-2">
                                                    <input type="number" class="form-control" value="{{this.discount}}"
                                                        name="discount" id="discount" placeholder="Discount Price" />
                                                    <label for="floatingInput">Discount</label>
                                                </div>


                                                <select class="form-select mb-3 mt-2"
                                                    aria-label="Default select example" name="category"
                                                    id="selectCategory">
                                                    <option value="select" selected> select Category</option>
                                                    {{#each ../category}}

                                                    <option value="{{this._id}}">{{this.categoryname}}</option>
                                                    {{/each}}
                                                </select>

                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" value="{{this.stock}}"
                                                        name="stock" id="stock" placeholder="discription" />
                                                    <label for="floatingInput">Stock</label>
                                                </div>
                                                <div class="form-floating mt-2 pt-2">
                                                    <textarea class="form-control" placeholder="Leave a comment here"  name="discription"
                                                        id="" style="height: 80px"></textarea>
                                                    <label for="" value="{{this.discription}}"
                                                       >Discription</label>
                                                </div>



                                                <label for="formFile" class="form-label">UPLOAD IMAGES</label>
                                                <div class="row ml-auto">
                                                    <input class="form-control col-8" type="file" multiple id="image"
                                                        value="{{this.image}}" name="image" />
                                                    <img class="col-3" style="width:2rem ;" id="myimg" src="" />
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-outline-danger"
                                                        data-bs-dismiss="modal">Cancel</button>
                                                    <button type="submit"
                                                        class="btn btn-outline-success">Submit</button>
                                                </div>
                                            </form>

                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>

                        {{/each}}
                    </tbody>
                </table>
            </div>

        </div>
    </div>

</div>


<script>
    $(document).ready(function() {
    $('#product').DataTable( {
        dom: 'Bfrtip',
        buttons: [
             'csv', 'print', 
        ]
    } );
} );
</script>


{{!-- {{#each productDetails}} --}}

<!-- Update Product  Modal -->
{{!-- <div class="modal fade" id="exampleModalUpdate{{this._id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-header">Update Product</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div>

                    <form class="mx-1 mx-md-4" id="myform1" action="/admin/update-products/{{this._id}}" method="post"
                        enctype="multipart/form-data">

                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" value="{{this.productname}}" name="productname"
                                id="productname" placeholder=" productname" />
                            <label for="floatingInput">Product Name</label>
                        </div>

                        <div class="form-floating mb-2 mt-2">
                            <input type="number" class="form-control" value="{{this.price}}" name="price" id="price"
                                placeholder="Price" />
                            <label for="floatingInput">Price</label>
                        </div>

                        <div class="form-floating mb-2 mt-2">
                            <input type="number" class="form-control" value="{{this.discount}}" name="discount"
                                id="discount" placeholder="Discount Price" />
                            <label for="floatingInput">Discount</label>
                        </div>


                        <select class="form-select mb-3 mt-2" aria-label="Default select example" name="category"
                            id="selectCategory">
                            <option value="select" selected> select Category</option>
                            {{#each ../category}}

                            <option value="{{this._id}}">{{this.categoryname}}</option>
                            {{/each}}
                        </select>

                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" value="{{this.stock}}" name="stock" id="stock"
                                placeholder="discription" />
                            <label for="floatingInput">Stock</label>
                        </div>
                        <div class="form-floating mt-2 pt-2">
                            <textarea class="form-control" placeholder="Leave a comment here" id=""
                                style="height: 80px"></textarea>
                            <label for="" value="{{this.discription}}" name="discription">Discription</label>
                        </div>



                        <label for="formFile" class="form-label">UPLOAD IMAGES</label>
                        <div class="row ml-auto">
                            <input class="form-control col-8" type="file" multiple id="image" value="{{this.image}}"
                                name="image" />
                            <img class="col-3" style="width:2rem ;" id="myimg" src="" />
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-outline-success">Submit</button>
                        </div>
                    </form>

                </div>
            </div>


        </div>
    </div>
</div> --}}
{{!-- {{/each}} --}}